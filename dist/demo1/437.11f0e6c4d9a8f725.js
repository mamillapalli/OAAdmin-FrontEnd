"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[437],{4437:(Le,S,s)=>{s.r(S),s.d(S,{SystemMaintenanceModule:()=>Ge});var u=s(6019),p=s(4856),f=s(1248),E=s(8292),_=s(4522),M=s(4821),N=s(2501),m=s(9133),y=s(5496),U=s(8360),x=s(5233),I=s(2708),D=s(4959),q=s(5093),F=s(1217),B=s(1893),V=s(2053),J=s(2107),Y=s(8148),A=s(7429),P=s(1292),Q=s(1260),K=s(5949),O=s(2587),w=s(2450),z=s(4275),H=s(1116),$=s(8039),v=s(5135),T=s(2027),G=s(3470),W=s(3855),j=s(5167),X=s(6475),L=s(9574),ee=s(4878),te=s(3468),ae=s(7041),d=s(7577),g=s(5405),ne=s(6241),oe=s(6133),se=s(5038),ie=s(2915),le=s(7978),ce=s(2387),h=s(8898),Z=s(9861),re=s(7980),ge=s(1006),me=s(9765),C=s(3863),e=s(3668);let ue=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-system-maintenance"]],decls:1,vars:0,template:function(t,a){1&t&&e._UZ(0,"router-outlet")},directives:[C.lC],styles:[""]}),n})();var de=s(1659),c=s.n(de),R=s(4226);let he=(()=>{class n{constructor(t,a){this.oaCommonService=t,this.fb=a,this.unsubscribe=[]}ngOnInit(){this.batchManagerForm=this.fb.group({portalStatus:[],notificationStatus:[],emailStatus:[],financeTask:[],paymentTask:[],invValidationTask:[],recUploadInvoiceTask:[]}),this.checkTaskStatus()}checkTaskStatus(){this.oaCommonService.taskManagerStatus("/oaadmin/api/v1/tasks/portal/status").subscribe(t=>{console.log(t),"true"===t?(console.log(!0),console.log(t),this.f.portalStatus.setValue(!0)):(console.log(!1),console.log(t),this.f.portalStatus.setValue(!1))}),this.oaCommonService.taskManagerStatus("/oaadmin/api/v1/tasks/notification/status").subscribe(t=>{console.log(t),"true"===t?(console.log(!0),console.log(t),this.f.notificationStatus.setValue(!0)):(console.log(!1),console.log(t),this.f.notificationStatus.setValue(!1))}),this.oaCommonService.taskManagerStatus("/oanotification/api/v1/tasks/sendEmail/status").subscribe(t=>{console.log(t),"true"===t?(console.log(!0),console.log(t),this.f.emailStatus.setValue(!0)):(console.log(!1),console.log(t),this.f.emailStatus.setValue(!1))}),this.oaCommonService.taskManagerStatus("/oapf/api/v1/tasks/autoFinance/status").subscribe(t=>{console.log(t),"true"===t?(console.log(!0),console.log(t),this.f.financeTask.setValue(!0)):(console.log(!1),console.log(t),this.f.financeTask.setValue(!1))}),this.oaCommonService.taskManagerStatus("/oapf/api/v1/tasks/autoPayment/status").subscribe(t=>{console.log(t),"true"===t?(console.log(!0),console.log(t),this.f.paymentTask.setValue(!0)):(console.log(!1),console.log(t),this.f.paymentTask.setValue(!1))}),this.oaCommonService.taskManagerStatus("/oapf/api/v1/tasks/invoiceValidation/status").subscribe(t=>{console.log(t),"true"===t?(console.log(!0),console.log(t),this.f.invValidationTask.setValue(!0)):(console.log(!1),console.log(t),this.f.invValidationTask.setValue(!1))}),this.oaCommonService.taskManagerStatus("oapf/api/v1/tasks/recordUploadedInvoices/status").subscribe(t=>{console.log(t),"true"===t?(console.log(!0),console.log(t),this.f.recUploadInvoiceTask.setValue(!0)):(console.log(!1),console.log(t),this.f.recUploadInvoiceTask.setValue(!1))}),this.oaCommonService.taskManagerStatus("/oadata/api/v1/tasks/exchangeRateUpload/status").subscribe(t=>{console.log(t),"true"===t?(console.log(!0),console.log(t),this.f.exchangeRateTask.setValue(!0)):(console.log(!1),console.log(t),this.f.exchangeRateTask.setValue(!1))})}get f(){return this.batchManagerForm.controls}changeStatusTask(t){const a=t.target;console.log(a.id),"portalStatus"===a.id?!0===this.batchManagerForm.value.portalStatus?(console.log(this.batchManagerForm.value.portalStatus),this.oaCommonService.taskManagerStatus("/oaadmin/api/v1/tasks/portal/start").subscribe(o=>{void 0!==o&&c().fire({title:"Portal Task has been Started",icon:"success"})})):(console.log(this.batchManagerForm.value.portalStatus),this.oaCommonService.taskManagerStatus("/oaadmin/api/v1/tasks/portal/stop").subscribe(o=>{void 0!==o&&c().fire({title:"Portal Task has been Stopped",icon:"success"})})):"notificationStatus"===a.id?!0===this.batchManagerForm.value.portalStatus?(console.log(this.batchManagerForm.value.portalStatus),this.oaCommonService.taskManagerStatus("/oaadmin/api/v1/tasks/notification/start").subscribe(o=>{void 0!==o&&c().fire({title:"Notification Task has been Started",icon:"success"})})):(console.log(this.batchManagerForm.value.portalStatus),this.oaCommonService.taskManagerStatus("/oaadmin/api/v1/tasks/notification/stop").subscribe(o=>{void 0!==o&&c().fire({title:"Notification Task has been Stopped",icon:"success"})})):"emailStatus"===a.id?!0===this.batchManagerForm.value.emailStatus?this.oaCommonService.taskManagerStatus("/oanotification/api/v1/tasks/sendEmail/stop").subscribe(o=>{void 0!==o&&c().fire({title:"Email Task has been Started",icon:"success"})}):(console.log(this.batchManagerForm.value.emailStatus),this.oaCommonService.taskManagerStatus("/oanotification/api/v1/tasks/sendEmail/stop").subscribe(o=>{void 0!==o&&c().fire({title:"Email Task has been Stopped",icon:"success"})})):"financeTask"===a.id?!0===this.batchManagerForm.value.financeTask?this.oaCommonService.taskManagerStatus("/oapf/api/v1/tasks/autoFinance/start").subscribe(o=>{void 0!==o&&c().fire({title:"Auto Finance Task has been Started",icon:"success"})}):(console.log(this.batchManagerForm.value.financeTask),this.oaCommonService.taskManagerStatus("/oapf/api/v1/tasks/autoFinance/stop").subscribe(o=>{void 0!==o&&c().fire({title:"Auto Finance Task has been Stopped",icon:"success"})})):"paymentTask"===a.id?!0===this.batchManagerForm.value.paymentTask?this.oaCommonService.taskManagerStatus("/oapf/api/v1/tasks/autoPayment/start").subscribe(o=>{void 0!==o&&c().fire({title:"Auto Payment Task has been Started",icon:"success"})}):(console.log(this.batchManagerForm.value.paymentTask),this.oaCommonService.taskManagerStatus("/oapf/api/v1/tasks/autoPayment/stop").subscribe(o=>{void 0!==o&&c().fire({title:"Auto Payment Task has been Stopped",icon:"success"})})):"invValidationTask"===a.id?!0===this.batchManagerForm.value.invValidationTask?this.oaCommonService.taskManagerStatus("/oapf/api/v1/tasks/invoiceValidation/start").subscribe(o=>{void 0!==o&&c().fire({title:"Invoice Validation Task has been Started",icon:"success"})}):this.oaCommonService.taskManagerStatus("/oapf/api/v1/tasks/invoiceValidation/stop").subscribe(o=>{void 0!==o&&c().fire({title:"Invoice Validation Task has been Stopped",icon:"success"})}):"recUploadInvoiceTask"===a.id?!0===this.batchManagerForm.value.recUploadInvoiceTask?this.oaCommonService.taskManagerStatus("/oapf/api/v1/tasks/recordUploadedInvoices/start").subscribe(o=>{void 0!==o&&c().fire({title:"Record Upload Invoices Task has been Started",icon:"success"})}):this.oaCommonService.taskManagerStatus("/oapf/api/v1/tasks/recordUploadedInvoices/stop").subscribe(o=>{void 0!==o&&c().fire({title:"Record Upload Invoices Task has been Stopped",icon:"success"})}):"exchangeRateTask"===a.id&&(!0===this.batchManagerForm.value.exchangeRateTask?this.oaCommonService.taskManagerStatus("/oadata/api/v1/tasks/exchangeRateUpload/start").subscribe(o=>{void 0!==o&&c().fire({title:"Record Upload Invoices Task has been Started",icon:"success"})}):this.oaCommonService.taskManagerStatus("/oadata/api/v1/tasks/exchangeRateUpload/stop").subscribe(o=>{void 0!==o&&c().fire({title:"Record Upload Invoices Task has been Stopped",icon:"success"})}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(R.v),e.Y36(m.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-batch-manager"]],decls:97,vars:1,consts:[["id","kt_profile_details_view",1,"card","mb-5","mb-xl-5"],[1,"card"],[1,"card-header","cursor-pointer"],[1,"card-title","m-0"],[1,"fw-lighter","m-0"],[1,"card-body"],[1,"card","card-columns","mx-auto","d-flex","justify-content-center","col-12",2,"width","50%"],[3,"formGroup"],[1,"d-flex","flex-column","mb-7","fv-row"],[1,"d-flex","flex-stack"],[1,"me-5"],[1,"fs-6","fw-light","form-label"],[1,"form-check","form-switch","form-check-custom","form-check-solid"],[1,"form-check-label","fw-light","text-danger"],["name","portalStatus","id","portalStatus","formControlName","portalStatus","type","checkbox",1,"form-check-input",3,"change"],[1,"form-check-label","fw-light","text-success"],["name","notificationStatus","id","notificationStatus","formControlName","notificationStatus","type","checkbox",1,"form-check-input",3,"change"],["name","emailStatus","id","emailStatus","formControlName","notificationStatus","type","checkbox",1,"form-check-input",3,"change"],["name","financeTask","id","financeTask","formControlName","financeTask","type","checkbox",1,"form-check-input",3,"change"],[1,"form-check-label","fw-light","text-green-400"],["name","paymentTask","id","paymentTask","formControlName","paymentTask","type","checkbox",1,"form-check-input",3,"change"],["name","invValidationTask","id","invValidationTask","formControlName","invValidationTask","type","checkbox",1,"form-check-input",3,"change"],["name","recUploadInvoiceTask","id","recUploadInvoiceTask","formControlName","recUploadInvoiceTask","type","checkbox",1,"form-check-input",3,"change"],["name","exchangeRateTask","id","exchangeRateTask","formControlName","exchangeRateTask","type","checkbox",1,"form-check-input",3,"change"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"h3",4),e._uU(5,"Batch Manager"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"div",6),e.TgZ(8,"div",7),e.TgZ(9,"div",8),e.TgZ(10,"div",9),e.TgZ(11,"div",10),e.TgZ(12,"label",11),e._uU(13,"Portal Task"),e.qZA(),e.qZA(),e.TgZ(14,"label",12),e.TgZ(15,"span",13),e._uU(16,"Stopped"),e.qZA(),e.TgZ(17,"input",14),e.NdJ("change",function(i){return a.changeStatusTask(i)}),e.qZA(),e.TgZ(18,"span",15),e._uU(19,"Started"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",8),e.TgZ(21,"div",9),e.TgZ(22,"div",10),e.TgZ(23,"label",11),e._uU(24,"Notification Task"),e.qZA(),e.qZA(),e.TgZ(25,"label",12),e.TgZ(26,"span",13),e._uU(27," Stopped "),e.qZA(),e.TgZ(28,"input",16),e.NdJ("change",function(i){return a.changeStatusTask(i)}),e.qZA(),e.TgZ(29,"span",15),e._uU(30,"Started"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",8),e.TgZ(32,"div",9),e.TgZ(33,"div",10),e.TgZ(34,"label",11),e._uU(35,"Email Notification Task"),e.qZA(),e.qZA(),e.TgZ(36,"label",12),e.TgZ(37,"span",13),e._uU(38," Stopped "),e.qZA(),e.TgZ(39,"input",17),e.NdJ("change",function(i){return a.changeStatusTask(i)}),e.qZA(),e.TgZ(40,"span",15),e._uU(41," Started "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",8),e.TgZ(43,"div",9),e.TgZ(44,"div",10),e.TgZ(45,"label",11),e._uU(46,"Auto Finance Task"),e.qZA(),e.qZA(),e.TgZ(47,"label",12),e.TgZ(48,"span",13),e._uU(49," Stopped "),e.qZA(),e.TgZ(50,"input",18),e.NdJ("change",function(i){return a.changeStatusTask(i)}),e.qZA(),e.TgZ(51,"span",19),e._uU(52,"Started"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",8),e.TgZ(54,"div",9),e.TgZ(55,"div",10),e.TgZ(56,"label",11),e._uU(57,"Auto Payment Task"),e.qZA(),e.qZA(),e.TgZ(58,"label",12),e.TgZ(59,"span",13),e._uU(60," Stopped "),e.qZA(),e.TgZ(61,"input",20),e.NdJ("change",function(i){return a.changeStatusTask(i)}),e.qZA(),e.TgZ(62,"span",15),e._uU(63," Started "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(64,"div",8),e.TgZ(65,"div",9),e.TgZ(66,"div",10),e.TgZ(67,"label",11),e._uU(68,"Invoice Validation Task"),e.qZA(),e.qZA(),e.TgZ(69,"label",12),e.TgZ(70,"span",13),e._uU(71," Stopped "),e.qZA(),e.TgZ(72,"input",21),e.NdJ("change",function(i){return a.changeStatusTask(i)}),e.qZA(),e.TgZ(73,"span",15),e._uU(74," Started "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(75,"div",8),e.TgZ(76,"div",9),e.TgZ(77,"div",10),e.TgZ(78,"label",11),e._uU(79,"Record Upload Invoices Task"),e.qZA(),e.qZA(),e.TgZ(80,"label",12),e.TgZ(81,"span",13),e._uU(82," Stopped "),e.qZA(),e.TgZ(83,"input",22),e.NdJ("change",function(i){return a.changeStatusTask(i)}),e.qZA(),e.TgZ(84,"span",15),e._uU(85," Started "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(86,"div",8),e.TgZ(87,"div",9),e.TgZ(88,"div",10),e.TgZ(89,"label",11),e._uU(90,"Exchange Rate Task"),e.qZA(),e.qZA(),e.TgZ(91,"label",12),e.TgZ(92,"span",13),e._uU(93," Stopped "),e.qZA(),e.TgZ(94,"input",23),e.NdJ("change",function(i){return a.changeStatusTask(i)}),e.qZA(),e.TgZ(95,"span",15),e._uU(96," Started "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(8),e.Q6J("formGroup",a.batchManagerForm))},directives:[m.JL,m.sg,m.Wl,m.JJ,m.u],styles:[""]}),n})();var k=s(648),pe=s(6388),fe=s(7039),ve=s(7198),Te=s(5442),Ze=s(8823);function Ce(n,l){1&n&&(e.TgZ(0,"mat-header-cell",31),e._uU(1,"INV No "),e.qZA())}function be(n,l){if(1&n&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.hij(" ",t.invoiceNumber," ")}}function Se(n,l){1&n&&(e.TgZ(0,"mat-header-cell",31),e._uU(1,"SBR No "),e.qZA())}function _e(n,l){if(1&n&&(e.TgZ(0,"mat-cell",32),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.hij(" ",t.sbrReferenceId," ")}}function xe(n,l){1&n&&(e.TgZ(0,"mat-header-cell",31),e._uU(1,"Agreement No "),e.qZA())}function Ae(n,l){if(1&n&&(e.TgZ(0,"mat-cell",32),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.hij("",t.agreementId," ")}}function Re(n,l){1&n&&(e.TgZ(0,"mat-header-cell",31),e._uU(1,"CCY"),e.qZA())}function ke(n,l){if(1&n&&(e.TgZ(0,"mat-cell",32),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.hij(" ",t.currency," ")}}function Ee(n,l){1&n&&(e.TgZ(0,"mat-header-cell",31),e._uU(1,"Amount "),e.qZA())}function Me(n,l){if(1&n&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.hij(" ",t.amount," ")}}function Ne(n,l){1&n&&(e.TgZ(0,"mat-header-cell",31),e._uU(1,"Due Date "),e.qZA())}function ye(n,l){if(1&n&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.dueDate,"MM/dd/YYY")," ")}}function Ue(n,l){1&n&&(e.TgZ(0,"mat-header-cell",31),e._uU(1,"Status "),e.qZA())}function Ie(n,l){if(1&n&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.xp6(1),e.hij(" ",t.status," ")}}function De(n,l){1&n&&(e.TgZ(0,"mat-header-cell",31),e._uU(1," Actions "),e.qZA())}function qe(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().openInvoiceDialog(o,"edit")}),e._UZ(2,"span",36),e.qZA(),e.BQk()}2&n&&(e.xp6(2),e.Q6J("inlineSVG","./assets/media/svg/icons/Communication/Write.svg"))}function Fe(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().openInvoiceDialog(o,"view")}),e._UZ(2,"span",38),e.qZA(),e.BQk()}2&n&&(e.xp6(2),e.Q6J("inlineSVG","./assets/media/svg/icons/Code/Compiling.svg"))}function Be(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().openInvoiceDialog(o,"auth")}),e._UZ(2,"span",40),e.qZA(),e.BQk()}2&n&&(e.xp6(2),e.Q6J("inlineSVG","./assets/media/icons/duotune/arrows/arr064.svg"))}function Ve(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",41),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,i=e.oxw(),r=e.MAs(47);return i.openInvoiceDialog(r,o)}),e._UZ(2,"span",42),e.qZA(),e.BQk()}2&n&&(e.xp6(2),e.Q6J("inlineSVG","./assets/media/svg/icons/General/Trash.svg"))}function Je(n,l){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"a",43),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw().openInvoiceDialog(o,"viewHistory")}),e._UZ(2,"span",36),e.qZA(),e.BQk()}2&n&&(e.xp6(2),e.Q6J("inlineSVG","./assets/media/svg/icons/Communication/Clipboard-list.svg"))}function Ye(n,l){if(1&n&&(e.TgZ(0,"mat-cell",33),e.YNc(1,qe,3,1,"ng-container",34),e.YNc(2,Fe,3,1,"ng-container",34),e.YNc(3,Be,3,1,"ng-container",34),e.YNc(4,Ve,3,1,"ng-container",34),e.YNc(5,Je,3,1,"ng-container",34),e.qZA()),2&n){const t=l.$implicit,a=e.oxw();e.xp6(1),e.Q6J("ngIf",(a.authRoles.includes("SUPER_ADMIN")||a.authRoles.includes("BANK_USER_MAKER")||a.authRoles.includes("BANK_ADMIN_MAKER"))&&"MASTER"!=t.transactionStatus),e.xp6(1),e.Q6J("ngIf",a.authRoles.includes("SUPER_ADMIN")||a.authRoles.includes("BANK_USER_MAKER")||a.authRoles.includes("BANK_USER_CHECKER")||a.authRoles.includes("BANK_USER_VIEWER")||a.authRoles.includes("BANK_ADMIN_MAKER")||a.authRoles.includes("BANK_ADMIN_CHECKER")||a.authRoles.includes("BANK_ADMIN_VIEWER")),e.xp6(1),e.Q6J("ngIf",(a.authRoles.includes("SUPER_ADMIN")||a.authRoles.includes("BANK_USER_MAKER")||a.authRoles.includes("BANK_USER_CHECKER")||a.authRoles.includes("BANK_USER_VIEWER")||a.authRoles.includes("BANK_ADMIN_MAKER")||a.authRoles.includes("BANK_ADMIN_CHECKER")||a.authRoles.includes("BANK_ADMIN_VIEWER"))&&"PENDING"===t.transactionStatus),e.xp6(1),e.Q6J("ngIf",(a.authRoles.includes("SUPER_ADMIN")||a.authRoles.includes("BANK_ADMIN_VIEWER")||a.authRoles.includes("BANK_USER_VIEWER"))&&"PENDING"===t.transactionStatus),e.xp6(1),e.Q6J("ngIf",a.authRoles.includes("SUPER_ADMIN")||a.authRoles.includes("BANK_ADMIN_VIEWER")||a.authRoles.includes("BANK_USER_VIEWER"))}}function Pe(n,l){1&n&&e._UZ(0,"mat-header-row")}function Qe(n,l){1&n&&e._UZ(0,"mat-row")}function Ke(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",44),e.TgZ(1,"h4",45),e._uU(2,"Confirmation"),e.qZA(),e.TgZ(3,"button",46),e.NdJ("click",function(){return e.CHM(t).dismiss("Cross click")}),e.TgZ(4,"span",47),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",48),e.TgZ(7,"p"),e._uU(8,"Are you sure to delete this?"),e.qZA(),e.qZA(),e.TgZ(9,"div",49),e.TgZ(10,"button",50),e.NdJ("click",function(){return e.CHM(t).dismiss("Cross click")}),e._uU(11,"Cancel"),e.qZA(),e.TgZ(12,"button",50),e.NdJ("click",function(){return e.CHM(t).close("yes")}),e._uU(13,"Yes"),e.qZA(),e.qZA()}}const Oe=function(n){return{width:n}};function we(n,l){if(1&n&&(e.TgZ(0,"div",59),e.TgZ(1,"div",60),e._uU(2),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngStyle",e.VKq(3,Oe,t.progress+"%")),e.uIk("aria-valuenow",t.progress),e.xp6(1),e.hij(" ",t.progress,"% ")}}function ze(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",44),e.TgZ(1,"h2",51),e._uU(2,"Uploaded Invoices"),e.qZA(),e.TgZ(3,"button",46),e.NdJ("click",function(){return e.CHM(t).dismiss("Cross click")}),e.TgZ(4,"span",47),e._uU(5,"\xd7"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",48),e.TgZ(7,"div",52),e.TgZ(8,"div",53),e.TgZ(9,"label",54),e.TgZ(10,"input",55),e.NdJ("change",function(o){return e.CHM(t),e.oxw().selectFile(o)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div",56),e.TgZ(12,"button",57),e.NdJ("click",function(){return e.CHM(t),e.oxw().upload()}),e._uU(13," Upload file "),e.qZA(),e.qZA(),e.qZA(),e.YNc(14,we,3,5,"div",58),e.qZA(),e.TgZ(15,"div",49),e.TgZ(16,"button",50),e.NdJ("click",function(){return e.CHM(t).dismiss("Cross click")}),e._uU(17,"Cancel"),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.xp6(12),e.Q6J("disabled",!t.selectedFiles),e.xp6(2),e.Q6J("ngIf",t.currentFile)}}const He=[{path:"",component:ue,children:[{path:"batchmanager",component:he},{path:"exchangerate",component:(()=>{class n{constructor(t,a,o,i,r,We,je,Xe){this.http=t,this.authService=a,this.modalService=o,this.notifyService=i,this.invoiceServices=r,this.datePipe=We,this.spinner=je,this.oaCommonService=Xe,this.dataSource=new g.by,this.displayedColumns=["invoiceNumber","sbrReferenceId","agreementId","currency","amount","dueDate","status","actions"],this.fDisplayedColumns=["invoiceNumber","sbrReferenceId","agreementId","currency","amount","dueDate","status"],this.modalOption={},this.customFilters=[],this.addFilterFlag=!1,this.firstName=new m.NI(""),this.filterValues={firstName:""},this.progress=0,this.message="",this.errorMsg="",this.subscriptions=[],this.totalRows=0,this.pageSize=5,this.currentPage=0,this.pageSizeOptions=[5,10,25,100];const b=this.authService.getAuthFromLocalStorage();this.authRoles=null==b?void 0:b.aRoles}ngOnInit(){this.getInvoices(this.currentPage,this.pageSize,this.sortData)}getInvoices(t,a,o){console.log("Get Invoices"),this.spinner.show();const i=this.oaCommonService.getMethod("/oadata/api/v1/exchangeRates","All").subscribe(r=>{console.log(r),this.dataSource.data=r.content,this.totalRows=r.totalElements,console.log(this.totalRows),this.spinner.hide(),this.dataSource.filterPredicate=this.createFilter()});this.subscriptions.push(i)}createFilter(){return function(a,o){let i=JSON.parse(o);return-1!==a.firstName.toLowerCase().indexOf(i.firstName)}}newExchangeRate(){this.modalOption.backdrop="static",this.modalOption.keyboard=!1,this.modalOption.size="xl";const t=this.modalService.open(k.B,this.modalOption);t.componentInstance.mode="new",t.result.then(a=>{console.log("newBankAdmin is "+a)},a=>{this.getInvoices(this.currentPage,this.pageSize,this.sortData),this.closeResult=`Dismissed ${this.getDismissReason(a)}`})}openInvoiceDialog(t,a){if("viewHistory"===a){this.modalOption.backdrop="static",this.modalOption.keyboard=!1;const o=this.modalService.open(pe.v,this.modalOption);o.componentInstance.invoiceNumber=t.invoiceNumber,o.result.then(i=>{console.log(i)},i=>{this.getInvoices(this.currentPage,this.pageSize,this.sortData),this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}else{console.log("123"+t),console.log("123"+a),this.modalOption.backdrop="static",this.modalOption.keyboard=!1,this.modalOption.size="sm";const o=this.modalService.open(k.B,this.modalOption);o.componentInstance.mode=a,o.componentInstance.fromParent=t,o.result.then(i=>{console.log(i)},i=>{this.getInvoices(this.currentPage,this.pageSize,this.sortData),this.closeResult=`Dismissed ${this.getDismissReason(i)}`})}}openInvoiceDelete(t,a){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(o=>{this.closeResult=`Closed with: ${o}`,"yes"===o&&this.deleteModal(a)},o=>{this.getInvoices(this.currentPage,this.pageSize,this.sortData),this.closeResult=`Dismissed ${this.getDismissReason(o)}`})}deleteModal(t){this.invoiceServices.dataItem(t,"delete").subscribe(a=>{},a=>{this.notifyService.showError(a,"Delete Customer"),console.error("There was an error!",a)})}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}uploadExchangeRate(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then(a=>{this.closeResult=`Closed with: ${a}`,"yes"===a&&this.getInvoices(this.currentPage,this.pageSize,this.sortData)},a=>{this.getInvoices(this.currentPage,this.pageSize,this.sortData),this.closeResult=`Dismissed ${this.getDismissReason(a)}`})}selectFile(t){this.selectedFiles=t.target.files}upload(){if(this.errorMsg="",this.message="",this.progress=0,this.selectedFiles){const t=this.selectedFiles.item(0);t&&(this.currentFile=t,this.invoiceServices.upload(this.currentFile).subscribe(a=>{console.log(a),this.progress=Math.round(100),null!=a.fileId&&this.invoiceServices.uploadFileStatus(a.fileId).subscribe(o=>{console.log(o),null!==o?c().fire({title:"File Status is "+o.fileStatus,icon:"success"}):c().fire({title:"Error is occurred."+o,icon:"error"})},o=>{console.error("There was an error!",o),c().fire({title:"Error is occurred."+o,icon:"error"})})},a=>{console.log(a),this.errorMsg=a.error&&a.error.responseMessage?a.error.responseMessage:"Error occurred while uploading a file!",console.error("There was an error!",this.errorMsg),c().fire({title:"Error is occurred."+this.errorMsg,icon:"error"}),this.currentFile=void 0})),this.selectedFiles=void 0}}openFilter(){this.modalOption.backdrop="static",this.modalOption.keyboard=!1;const t=this.modalService.open(fe.z,this.modalOption);t.componentInstance.fDisplayedColumns=this.fDisplayedColumns,t.result.then(a=>{if(a.valid&&a.value.filterOption.length>0){const o=this.oaCommonService.getFilter(a,"filter","/oadata/api/v1/exchangeRates").subscribe(i=>{this.dataSource.data=i,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator});this.subscriptions.push(o)}else{const o=this.oaCommonService.getFilter(a,"all","oadata/api/v1/exchangeRates").subscribe(i=>{this.dataSource.data=i,this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator});this.subscriptions.push(o)}},a=>{this.closeResult=`Dismissed ${this.getDismissReason(a)}`})}pageChanged(t){console.log(this.sort),console.log({event:t}),this.pageSize=t.pageSize,this.currentPage=t.pageIndex,this.getInvoices(this.currentPage,this.pageSize,this.sortData)}sortChanges(t){console.log(t.direction),this.sortData=t.active+","+t.direction,this.getInvoices(this.currentPage,this.pageSize,t.active)}getDismissReason(t){return t===h.If.ESC?"by pressing ESC":t===h.If.BACKDROP_CLICK?"by clicking on a backdrop":`with: ${t}`}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.eN),e.Y36(ve.e8),e.Y36(h.FF),e.Y36(Te.g),e.Y36(Ze.z),e.Y36(u.uU),e.Y36(Z.t2),e.Y36(R.v))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-ex-change-rate"]],viewQuery:function(t,a){if(1&t&&(e.Gf(T.NW,7),e.Gf(d.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(a.paginator=o.first),e.iGM(o=e.CRH())&&(a.sort=o.first)}},decls:50,vars:8,consts:[[1,"card","card-custom","gutter-b"],[1,"card-header"],[1,"card-title"],[1,"card-label"],[1,"d-flex","align-items-center","py-1"],[1,"me-4"],["data-kt-menu-trigger","click","data-kt-menu-placement","bottom-end","data-kt-menu-flip","top-end",1,"btn","btn-sm","btn-flex","btn-light-warning","btn-active-light","fw-bolder","cursor-pointer",3,"click"],[1,"svg-icon","svg-icon-5","svg-icon-gray-500","me-1",3,"inlineSVG"],["data-bs-toggle","modal","data-bs-target","#kt_modal_create_app",1,"btn","btn-sm","btn-flex","btn-light-success","btn-active-light","fw-bolder","cursor-pointer",2,"margin-right","16px",3,"click"],["data-bs-toggle","modal","data-bs-target","#kt_modal_create_app",1,"btn","btn-sm","btn-flex","btn-light-primary","btn-active-primary","fw-bolder","cursor-pointer",2,"margin-right","16px",3,"click"],[1,"card-body","py-3"],[1,"table-responsive"],["matSort","",1,"table","table-row-dashed","table-row-gray-300","align-middle","gs-0","gy-4",2,"width","100%",3,"dataSource","matSortChange"],["matColumnDef","invoiceNumber",1,"min-w-150px"],["mat-sort-header","","class","label label-lg label-inline",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sbrReferenceId"],["class","label label-lg label-inline",4,"matCellDef"],["matColumnDef","agreementId"],["matColumnDef","currency"],["matColumnDef","amount"],["matColumnDef","dueDate"],["matColumnDef","status"],["matColumnDef","actions"],["class","action-link",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageIndex","pageSize","pageSizeOptions","page"],["paginator",""],["deleteContent",""],["cUploadInvoices",""],["mat-sort-header","",1,"label","label-lg","label-inline"],[1,"label","label-lg","label-inline"],[1,"action-link"],[4,"ngIf"],["title","Edit Transaction",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-md","svg-icon-primary",3,"inlineSVG"],["ng-if","(this.authRoles.includes('SUPER_ADMIN')","title","View Transaction",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-md","svg-icon-success",3,"inlineSVG"],["title","Authorize Transaction",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"svg-icon","svg-icon-md","svg-icon-warning",3,"inlineSVG"],["title","Delete customer",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],["fill","#2DB757",1,"svg-icon","svg-icon-md","svg-icon-danger",3,"inlineSVG"],["title","View History",1,"btn","btn-icon","btn-bg-light","btn-active-color-primary","btn-sm","me-1",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"modal-title"],[1,"row"],[1,"col-8"],[1,"btn","btn-default","p-0"],["type","file",3,"change"],[1,"col-4","text-right"],[1,"btn","btn-success","btn-sm",3,"disabled","click"],["class","progress my-3",4,"ngIf"],[1,"progress","my-3"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped",3,"ngStyle"]],template:function(t,a){if(1&t){const o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3",3),e._uU(4,"Exchange Rate Dashboard"),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.TgZ(6,"div",5),e.TgZ(7,"a",6),e.NdJ("click",function(){return a.openFilter()}),e._UZ(8,"span",7),e._uU(9," Filter "),e.qZA(),e.qZA(),e.TgZ(10,"a",8),e.NdJ("click",function(){return a.newExchangeRate()}),e._uU(11," Create Exchange Rate "),e.qZA(),e.TgZ(12,"a",9),e.NdJ("click",function(){e.CHM(o);const r=e.MAs(49);return a.uploadExchangeRate(r)}),e._uU(13," Upload Exchange Rate "),e.qZA(),e.qZA(),e.qZA(),e.TgZ(14,"div",10),e._UZ(15,"ngx-spinner"),e.TgZ(16,"div",11),e.TgZ(17,"mat-table",12),e.NdJ("matSortChange",function(r){return a.sortChanges(r)}),e.ynx(18,13),e.YNc(19,Ce,2,0,"mat-header-cell",14),e.YNc(20,be,2,1,"mat-cell",15),e.BQk(),e.ynx(21,16),e.YNc(22,Se,2,0,"mat-header-cell",14),e.YNc(23,_e,2,1,"mat-cell",17),e.BQk(),e.ynx(24,18),e.YNc(25,xe,2,0,"mat-header-cell",14),e.YNc(26,Ae,2,1,"mat-cell",17),e.BQk(),e.ynx(27,19),e.YNc(28,Re,2,0,"mat-header-cell",14),e.YNc(29,ke,2,1,"mat-cell",17),e.BQk(),e.ynx(30,20),e.YNc(31,Ee,2,0,"mat-header-cell",14),e.YNc(32,Me,2,1,"mat-cell",15),e.BQk(),e.ynx(33,21),e.YNc(34,Ne,2,0,"mat-header-cell",14),e.YNc(35,ye,3,4,"mat-cell",15),e.BQk(),e.ynx(36,22),e.YNc(37,Ue,2,0,"mat-header-cell",14),e.YNc(38,Ie,2,1,"mat-cell",15),e.BQk(),e.ynx(39,23),e.YNc(40,De,2,0,"mat-header-cell",14),e.YNc(41,Ye,6,5,"mat-cell",24),e.BQk(),e.YNc(42,Pe,1,0,"mat-header-row",25),e.YNc(43,Qe,1,0,"mat-row",26),e.qZA(),e.TgZ(44,"mat-paginator",27,28),e.NdJ("page",function(r){return a.pageChanged(r)}),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(46,Ke,14,0,"ng-template",null,29,e.W1O),e.YNc(48,ze,18,2,"ng-template",null,30,e.W1O)}2&t&&(e.xp6(8),e.Q6J("inlineSVG","./assets/media/icons/duotune/general/gen031.svg"),e.xp6(9),e.Q6J("dataSource",a.dataSource),e.xp6(25),e.Q6J("matHeaderRowDef",a.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(1),e.Q6J("length",a.totalRows)("pageIndex",a.currentPage)("pageSize",a.pageSize)("pageSizeOptions",a.pageSizeOptions))},directives:[p.d$,Z.Ro,g.BZ,d.YE,g.w1,g.fO,g.Dz,g.as,g.nj,T.NW,g.ge,d.nU,g.ev,u.O5,g.XQ,g.Gk,u.PC],pipes:[u.uU],styles:[""]}),n})()},{path:"",redirectTo:"batchmanager",pathMatch:"full"},{path:"**",redirectTo:"batchmanager",pathMatch:"full"}]}];let $e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[C.Bz.forChild(He)],C.Bz]}),n})(),Ge=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[u.ez,$e,f.QX,f.CV,f.mH,p.vi,E.aw.forRoot(),_.JF,M.Iq,p.vi.forRoot(),N.T,m.UX,y.A0,U.ZQ.forRoot(),x.Bb,I.g,D._r,q.ot,F.vV,B.QW,V.p9,J.Hi,Y.T5,A.FA,P.Is,Q.t,K.To,O.N6,w.Ps,z.c,H.ie,$.Tx,v.XK,T.TU,G.Cv,W.Cq,j.Fk,v.si,X.LD,L.SJ,ee.KP,te.rP,ae.ZX,d.JX,g.p0,ne.Nh,oe.g0,se.AV,ie.dp,x.Bb,le._t,A.FA,v.XK,ce.Rh.forRoot(),h.IJ,Z.ef,re.JB,ge._k,me.Ud]]}),n})()}}]);